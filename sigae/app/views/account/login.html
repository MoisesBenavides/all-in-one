<!DOCTYPE html>
<html lang="en">

<head>
  <!--IMPORTANTEEEE SI se edita el diseno, escribir en la terminal de el visual "npm run dev" (en ../app/config/) hay que tener node.js instalado-->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iniciar Sesion | AIO</title>
  <link href="../../../public/css/styles.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="../../../public/ico/logo-positivo.ico">
</head>
<style>
  @font-face {
    font-family: 'Teachers';
    src: ('sigae/public/font/Teachers-VariableFont_wght.ttf');
    font-weight: normal;
    font-style: normal;
  }

  /* Apply the 'Teachers' font to all text elements */
  body,
  input,
  select,
  button,
  option {
    font-family: 'Teachers', sans-serif;
  }
</style>

<body>
  <div class="flex justify-center items-center h-screen ">
    <div name="Contenedor" class="  w-[830px] h-[707px]  bg-white rounded-3xl border borders-black flex-col justify-center items-center  flex absolute mx-auto">
      <div name="LOGO" class=" w-[310px] h-36 justify-center items-center inline-flex">
        <img class="w-[310px] h-36" src="../../../public/img/AIO Positivo.png" />
      </div>
      <div name="Contenedor Campos" class="flex-col top-5 gap-[22px] relative flex">
        <div class=" flex-col top-5 gap-[22px] flex relative">
          <form class="CorreoContra" action="index.php?action=doLogin" class="flex items-center justify-around " method="POST">
            <div class="h-[52px] relative  ">
              <!--INPUT PARA MAIL-->
              <input id="email" name="email" type="mail" placeholder="Correo" class="space-x-6  p-2 w-[595.41px] h-[50px]  text-[#2f353c] text-[22px] font-normal   tracking-wide bg-white rounded-md border border-[#2f353c]   text-left">
            </div>
            <div class="h-[52px] relative ">
              <!--INPUT PARA CONTRASENA-->
              <input id="contrasena" name="contrasena" type="password" placeholder="Contraseña" class="space-x-6  p-2 w-[595.41px] h-[50px]  text-[#2f353c] text-[22px] font-normal   tracking-wide bg-white rounded-md border border-[#2f353c]   text-left">
            </div>
            <div name="contenedor submit" class="space-y-4">
              <!--Enviar-->
              <input type="submit" value="Ingresar" class=" w-[595.41px] h-12 px-2.5 py-1.5 bg-[#950d03] rounded-md  items-center gap-1.5 inline-flex text-neutral-50 text-2xl font-medium  leading-[28.80px]">
            </div>
          </form>
        </div>
        <div name="contenedor2" class="flex w-[595.41px] origin-left float-left bottom-5">
          <div class=" ">
            <a name="olvidaste tu contra" href="index.php?action=forgotPassword" class="text-left  text-[#545f71] text-base font-normal underline">¿Olvidaste tu contraseña?</a>
          </div>
          <a name="Registrarse" href="index.php?action=signup" class="pb-8 pt-8 justify-self-center text-[#545f71] text-base font-normal  underline">¿No tienes una cuenta? Registrate aquî</a>
        </div>
      </div>
      <script>
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            fetch(this.action + '&' + new URLSearchParams(new FormData(this)))
                .then(response => response.json())
                .then(data => {
                    const errorContainer = document.getElementById('error-container');
                    const errorList = document.getElementById('error-list');
                    
                    errorList.innerHTML = '';
                    
                    if (data.success) {
                        window.location.href = 'index.php?action=home';
                    } else {
                        errorContainer.classList.remove('hidden');
                        data.errors.forEach(error => {
                            const li = document.createElement('li');
                            li.textContent = error;
                            errorList.appendChild(li);
                        });
        
                        // Debug information
                        console.log('Debug info:', data.debug);
                        const debugInfo = document.createElement('pre');
                        debugInfo.textContent = JSON.stringify(data.debug, null, 2);
                        errorList.appendChild(debugInfo);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        });
        </script>
    </div>
  </div>

</html>