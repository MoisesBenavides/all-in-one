<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parking Layout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: 'Teachers';
            src: url('../../../font/Teachers-VariableFont_wght.ttf');
            font-weight: normal;
            font-style: normal;
        }

        body,
        input,
        select,
        button,
        option {
            font-family: 'Teachers', sans-serif;
        }
    </style>
</head>

<body class="bg-white">
    <div class="w-full max-w-[1440px] px-4 py-8 mx-auto flex flex-col items-center gap-8">
        <div
            class="w-full max-w-[896px] h-[46px] px-4 py-2 bg-[#d9d9d9] rounded-[10px] border border-[#c5b8b8] flex justify-center items-center gap-2.5">
            <img class="w-[30px] h-[30px]" src="https://via.placeholder.com/30x30" alt="Left arrow" />
            <div class="text-center text-black text-base font-medium">Piso 1</div>
            <img class="w-[30px] h-[30px]" src="https://via.placeholder.com/30x30" alt="Right arrow" />
        </div>

        <div id="parkingContainer"
            class="w-full max-w-[896px] h-auto min-h-[359px] p-4 pt-8 bg-white border border-black relative">
            <!-- Parking spots will be generated here -->
        </div>

        <div class="w-full max-w-[388px] flex justify-center">
            <button
                class="w-full max-w-[340px] h-[62px] px-7 py-2.5 bg-[#950d03] rounded-lg text-neutral-50 text-[32px] font-bold leading-[51.78px]">
                Continuar
            </button>
        </div>
    </div>

    <script>
        let selectedSpot = null;
        let vehicleType = "moto";

        function generateParkingLayout() {
            const container = document.getElementById('parkingContainer');
            container.innerHTML = ''; // Clear existing content

            if (vehicleType === "auto") {
                generateAutoLayout(container);
            } else if (vehicleType === "moto") {
                generateMotoLayout(container);
            }
        }

        function generateAutoLayout(container) {
            const leftColumn = createParkingColumn(1, 20, 'A');
            const middleColumn = createParkingColumn(21, 30, 'A');
            const rightColumn = createParkingColumn(31, 50, 'A');

            container.appendChild(createDiv('flex justify-center gap-[200px] h-full', [
                createDiv('flex flex-col justify-start overflow-y-auto', [leftColumn]),
                createDiv('flex flex-col justify-end', [
                    middleColumn,
                    createDiv('w-[85px] h-[108px] border-t border-b border-l border-black')
                ]),
                createDiv('flex flex-col justify-start overflow-y-auto', [rightColumn])
            ]));
        }

        function generateMotoLayout(container) {
            const motoSpots = createParkingColumn(1, 20, 'B');
            container.appendChild(createDiv('flex', [
                createDiv('w-1/4', [motoSpots]),
                createDiv('w-3/4 border-l border-black')
            ]));
        }

        function createParkingColumn(start, end, prefix) {
            const column = document.createElement('div');
            column.className = 'flex flex-col';
            for (let i = start; i <= end; i++) {
                column.appendChild(createParkingSpot(i, prefix, true));
            }
            return column;
        }

        function createParkingSpot(number, prefix, isVertical = true) {
            const spot = document.createElement('button');
            spot.className = `flex items-center justify-center border border-black m-0.5 cursor-pointer transition-colors ${isVertical ? 'w-14 h-10' : 'w-10 h-14'
                } hover:bg-gray-100`;
            spot.innerHTML = `<div class="text-center text-black text-xs font-bold">${prefix}${number}</div>`;//prefix puede ser A o B o C
            spot.addEventListener('click', function () {
                if (selectedSpot) {
                    selectedSpot.classList.remove('bg-[#5381c6]', 'text-white');
                }
                if (selectedSpot !== this) {
                    this.classList.add('bg-[#5381c6]', 'text-white');
                    selectedSpot = this;
                } else {
                    selectedSpot = null;
                }
            });
            return spot;
        }

        function createDiv(className, children = []) {
            const div = document.createElement('div');
            div.className = className;
            if (Array.isArray(children)) {
                children.forEach(child => {
                    if (child instanceof Node) {
                        div.appendChild(child);
                    }
                });
            } else if (children instanceof Node) {
                div.appendChild(children);
            }
            return div;
        }

        document.addEventListener('DOMContentLoaded', generateParkingLayout);
    </script>
</body>

</html>